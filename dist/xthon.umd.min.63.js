(("undefined"!==typeof self?self:this)["webpackJsonpxthon"]=("undefined"!==typeof self?self:this)["webpackJsonpxthon"]||[]).push([[63],{"145d":function(i,e,t){"use strict";t.r(e);var n=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",[i.fieldIsOpen&&i.isStandalone?t("div",{staticClass:"overlay"}):i._e(),t("div",{class:"field-wrapper layout-"+i.layout+" is-open-"+i.fieldIsOpen+" flex-one"},[t("UserDialog",{attrs:{spinner:i.userDialogSpinner,state:i.userDialogModal,"disable-close":i.userDialogSpinner},on:{"modal:close":function(e){i.cancelEdition()}}},[t("div",{attrs:{slot:"header"},slot:"header"},[i._v(i._s(i.userDialogHeading))]),t("div",{attrs:{slot:"content"},slot:"content"},[t("p",[i._v(i._s(i.userDialogMessage))])])]),t("div",{staticClass:"editable-field-wrapper flex-one",class:{columns:!i.isStandalone}},[t("div",{class:{"flex-one":i.isBackgroundImage&&!i.fieldIsOpen,"column is-6":!i.isStandalone}},[i.fieldIsOpen?i._e():t("div",{class:{"flex-one":i.isBackgroundImage},on:{click:function(e){i.openEdition()}}},[t("LazyLoadedImage",{staticClass:"inline-image-item",class:{"is-open":i.fieldIsOpen,"is-background":i.isBackgroundImage},attrs:{"is-background":i.isBackgroundImage,src:i.staticImage,alt:i.alt,"default-text":i.defaultText,"is-editable":i.editionIsEnabled}})],1),i.fieldIsOpen?t("croppa",{style:{width:i.calculateWidth+6+"px",height:i.calculateHeight+6+"px"},attrs:{"initial-image":i.croppaInitialImage,placeholder:"Select file","placeholder-font-size":20,"show-remove-button":!1,width:i.calculateWidth,height:i.calculateHeight,"prevent-white-space":!0},on:{keyup:function(e){if(!("button"in e)&&i._k(e.keyCode,"enter",13,e.key,"Enter"))return null;i.saveImage()},"new-image":function(e){i.errorMessage=""}},model:{value:i.croppaObject,callback:function(e){i.croppaObject=e},expression:"croppaObject"}},[t("div",{attrs:{slot:"initial"},slot:"initial"},[i._v("Click here to upload a file")])]):i._e()],1),i.editionIsEnabled?t("div",{staticClass:"image-control",class:{"column is-6":!i.isStandalone,"hero-image":.3===i.ratio}},[t("div",{staticClass:"action-icons-wrapper",class:{"is-open":i.fieldIsOpen}},[t("div",{staticClass:"action-icon-wrapper",class:{"hide-icon":i.fieldIsOpen},on:{click:function(e){i.openEdition()}}},[t("Icons",{staticClass:"action-icon",attrs:{icon:"pencil",iconwidth:"16px",iconheight:"16px",color:"#FFF"}})],1),t("div",{staticClass:"action-icon-wrapper",class:{"hide-icon":!i.fieldIsOpen},on:{click:function(e){i.saveImage()}}},[t("Icons",{staticClass:"action-icon",attrs:{icon:"check",iconwidth:"16px",iconheight:"16px",color:"#FFF"}})],1),t("div",{staticClass:"action-icon-wrapper",class:{"hide-icon":!i.fieldIsOpen},on:{click:function(e){i.cancelEdition()}}},[t("Icons",{staticClass:"action-icon",attrs:{icon:"close-circle",iconwidth:"16px",iconheight:"16px",color:"#FFF"}})],1)]),t("div",{staticClass:"button-wrapper"},[!i.disableOrientation&&i.fieldIsOpen?t("div",{staticClass:"orientation-wrapper"},[t("div",{on:{click:function(e){i.ratio=1}}},[t("Icons",{staticClass:"action-icon",attrs:{icon:"crop-square",iconwidth:"24px",iconheight:"24px",color:"#333"}})],1),t("div",{on:{click:function(e){i.ratio=4/3}}},[t("Icons",{staticClass:"action-icon",attrs:{icon:"crop-portrait",iconwidth:"24px",iconheight:"24px",color:"#333"}})],1),t("div",{on:{click:function(e){i.ratio=.75}}},[t("Icons",{staticClass:"action-icon",attrs:{icon:"crop-landscape",iconwidth:"24px",iconheight:"24px",color:"#333"}})],1)]):i._e(),i.required?i._e():t("button",{staticClass:"button is-warning",on:{click:function(e){i.removeImage()}}},[i._v("Remove")]),i.fieldIsOpen?t("button",{staticClass:"button is-info",on:{click:function(e){i.clearField()}}},[i._v("Clear")]):i._e(),i.defaultImage&&i.fieldIsOpen?t("button",{staticClass:"button is-primary",on:{click:function(e){i.useDefault()}}},[i._v("Use default")]):i._e(),i.fieldIsOpen?t("button",{staticClass:"button is-success",on:{click:function(e){i.saveImage()}}},[i._v("Generate")]):i._e()]),i.fieldIsOpen?t("div",{staticClass:"instructions"},[t("p",[i._v("Move the picture around the frame to crop it. You can also scroll or pinch with two fingers to zoom.")]),t("p",[i._v("Click generate once ready to save the image.")])]):i._e()]):i._e()]),t("transition",{attrs:{name:"slide-fade"}},[i.errorMessage?t("div",{staticClass:"editable-error-message-wrapper"},[t("span",{staticClass:"editable-error-message"},[i._v(i._s(i.errorMessage))])]):i._e()])],1)])},a=[],o=t("4706"),s=t("623f"),c={props:["item","layout","location","openId","openDefault","isBackgroundImage","alt","editionIsEnabled","type","is-standalone","disableOrientation","initialRatio","defaultImage","required","defaultText"],data:function(){return{croppaObject:{},croppaInitialImage:"",ratio:1,userDialogSpinner:!0,userDialogModal:!1,userDialogHeading:"Processing...",userDialogMessage:"",fieldIsOpen:!1,fieldValue:this.value,errorMessage:"",blurTimeout:null}},components:{Icons:o["default"],LazyLoadedImage:s["default"],UserDialog:function(){return t.e(1).then(t.bind(null,"b7cf"))}},computed:{calculateWidth:function(){if("undefined"===typeof window||"undefined"===typeof this.$el)return 400;var i=this.$el.clientWidth;return"avatar"===this.type?"overlay"===this.layout?i-12:i/2-12:i<400?i-6:400},calculateHeight:function(){return this.calculateWidth*this.ratio},initialImage:function(){return"undefined"!==typeof this.item?this.item.src:""},staticImage:function(){return this.initialImage?this.initialImage:this.defaultImage?this.defaultImage.src:""}},mounted:function(){this.openDefault&&this.openEdition(),this.initialRatio&&(this.ratio=this.initialRatio),this.croppaInitialImage=this.initialImage},methods:{cancelEdition:function(){this.fieldIsOpen&&!this.croppaObject.hasImage()&&this.$emit("image:remove"),this.fieldIsOpen=!1,this.errorMessage="",this.userDialogModal=!1,this.$emit("edition:close",this._uid)},openEdition:function(){this.editionIsEnabled&&(this.fieldIsOpen=!0,this.$emit("edition:open",this._uid))},clearField:function(){this.croppaObject&&this.croppaObject.hasImage()&&this.croppaObject.remove()},useDefault:function(){this.croppaInitialImage=this.defaultImage.src,this.croppaObject.refresh()},removeImage:function(){var i=this;this.userDialogModal=!0,this.userDialogSpinner=!0,this.errorMessage="","undefined"!==typeof this.item?this.$store.dispatch("REMOVE_IMAGE",{location:this.location,route:this.$route,id:this.item.id}).then(function(){i.cancelEdition()}).catch(function(e){i.userDialogSpinner=!1,i.errorMessage="An unknown error occurred.",console.log(e)}):this.cancelEdition()},saveImage:function(){var i=this;this.fieldIsOpen&&(this.userDialogModal=!0,this.croppaObject.generateBlob(function(e){e?(i.userDialogSpinner=!0,i.$store.dispatch("SAVE_IMAGE_FIELD",{location:i.location,route:i.$route,blob:e}).then(function(){i.cancelEdition()}).catch(function(i){console.log(i)})):(i.userDialogMessage="The image couldn't be generated.",i.userDialogSpinner=!1)},"image/jpeg",.8))}},watch:{openId:function(i){this.fieldIsOpen&&i!==this._uid&&(this.fieldIsOpen=!1)}}},l=c,r=(t("353b"),t("2877")),d=Object(r["a"])(l,n,a,!1,null,"2a421070",null);d.options.__file="InlineImageEditor.vue";e["default"]=d.exports},"353b":function(i,e,t){"use strict";var n=t("addf"),a=t.n(n);a.a},addf:function(i,e,t){}}]);
//# sourceMappingURL=xthon.umd.min.63.js.map