(("undefined"!==typeof self?self:this)["webpackJsonpxthon"]=("undefined"!==typeof self?self:this)["webpackJsonpxthon"]||[]).push([[59],{"6c29":function(e,t,i){},acfb:function(e,t,i){"use strict";var o=i("6c29"),s=i.n(o);s.a},e3b4:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"modal",class:{"is-active":e.showingLoginModal},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.validateSubmit()}}},[i("div",{staticClass:"modal-background",on:{click:function(t){e.closeLoginBox()}}}),i("div",{staticClass:"modal-content donate-view donate-view__wrapper inner-close small-modal"},[i("h1",{staticClass:"title-centered"},[e._t("heading",[e.loggedIn?i("span",[e._v("Your account")]):e._e(),e.loggedIn||e.register?e._e():i("span",[e._v("Login")]),!e.loggedIn&&e.register?i("span",[e._v("Register")]):e._e()])],2),e._t("intro",[e.loggedIn?e._e():i("p",{staticClass:"is-centered"},[e._v("Please log in with your email and password:")])]),i("div",{staticClass:"centered"},[e.loggedIn?i("p",[e._v("You are logged in as "+e._s(e.userName))]):e._e(),e.loggedIn?i("UserManagementLinks",{attrs:{layout:"header"},on:{"goto:account":function(t){e.closeLoginBox()}}}):e._e(),e.loggedIn?i("div",{on:{click:function(t){e.logUserOut()}}},[i("a",[e._v("Log Out »")])]):e._e()],1),i("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e.loggedIn?e._e():i("div",[i("form",{on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.validateSubmit()}}},[e.requireName?i("InputName",{attrs:{label:"Email (for the receipt):",required:!0},on:{"input:valid":function(t){e.validateAllFields()},"input:invalid":function(t){e.validateAllFields()},"input:first":function(t){e.form.firstname=t,e.errorMessage=""},"input:last":function(t){e.form.lastname=t,e.errorMessage=""}}}):e._e(),i("InputEmail",{attrs:{label:"Email",required:!0},on:{"input:valid":function(t){e.validateAllFields()},"input:invalid":function(t){e.validateAllFields()},"input:email":function(t){e.setEmail(t)}}}),i("InputPassword",{attrs:{label:"Password",required:!0,duplicate:e.register,"provide-feedback":e.register,"error-message":e.errorMessage},on:{"input:valid":function(t){e.validateAllFields()},"input:invalid":function(t){e.validateAllFields()},"input:password":function(t){e.form.password=t,e.errorMessage=""},"input:passwordConfirmation":function(t){e.form.passwordConfirmation=t,e.errorMessage=""}}})],1),i("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line password-input-wrapper"},[i("div",{staticClass:"column is-5 form-column__label-column input-label"}),i("div",{staticClass:"column is-5 form-column__input-column"},[i("ModalForgetPassword",{key:e.forgetPasswordEmail,attrs:{email:e.forgetPasswordEmail}})],1)]),i("div",{staticClass:"columns is-centered"},[i("div",{staticClass:"form-submit-wrapper",on:{click:function(t){t.preventDefault(),e.loginOrRegister()}}},[i("button",{staticClass:"button is-large is-danger",attrs:{disabled:e.submitButtonDisabled}},[e._v("Submit")])])]),i("SocialLogin",[i("div",{staticClass:"social-login-wrapper columns is-centered",attrs:{slot:"header"},slot:"header"},[i("p",{staticClass:"is-centered"},[e._v("Or with one of the following services:")])])])],1)]),i("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(t){t.preventDefault(),e.closeLoginBox()}}})],2)]),"social-signup"===e.layout?i("div",[i("SocialLogin",{attrs:{"show-only":e.showOnly}})],1):e._e(),"app-header"===e.layout?i("div",[e.loggedIn?e._e():i("div",[i("span",{on:{click:function(t){e.openLoginBox()}}},[i("a",[e._v("Login")])]),e._v("\n      |\n      "),i("span",{on:{click:function(t){e.openLoginBox()}}},[i("a",[e._v("Register")])])]),e.loggedIn?i("div",{on:{click:function(t){e.openLoginBox()}}},[e._t("logged",[i("a",[e._v(e._s(e.userName)+" »")])])],2):e._e()]):e._e(),e.layout?e._e():i("div",[e.loggedIn?e._e():i("div",{staticClass:"trigger"},[i("span",{on:{click:function(t){e.openLoginBox()}}},[e._t("trigger")],2)]),e._t("intro")],2)])},s=[],n=i("4706"),a=i("853f"),l=i("ba03"),r=i("a4ab"),u=i("9c9c"),d=i("fa8f"),c=i("2e53"),g={props:["layout","login","signup","showOnly","display","requireName","register"],components:{Icons:n["default"],InputEmail:l["default"],InputName:r["a"],InputPassword:u["default"],ModalForgetPassword:a["a"],SocialLogin:d["a"],UserManagementLinks:function(){return i.e(10).then(i.bind(null,"90de"))}},data:function(){return{showingLoginModal:this.display||!1,errorMessage:"",welcomeMessage:"",submitButtonDisabled:!0,form:{},forgetPasswordEmail:"",timeout:null}},computed:{loggedIn:function(){return this.$store.state.user.loggedIn},userName:function(){return this.$store.state.user.fullname}},methods:{setEmail:function(e){this.form.email=e,this.forgetPasswordEmail=e},openLoginBox:function(){this.showingLoginModal=!0},closeLoginBox:function(){this.showingLoginModal=!1,clearTimeout(this.timeout),this.$emit("modal:close")},logUserOut:function(){this.$store.commit("LOG_OFF",{status:!1}),this.closeLoginBox()},validateSubmit:function(){this.submitButtonDisabled||this.logUserIn()},loginOrRegister:function(){this.register?this.closeLoginBox():this.logUserIn()},validateAllFields:function(){var e=c["f"](this.form.firstname)&&c["f"](this.form.lastname),t=c["g"](this.form.password)&&!this.register||c["g"](this.form.password)&&this.form.password===this.form.passwordConfirmation;t&&c["d"](this.form.email)&&(e&&this.requireName||!this.requireName)?this.submitButtonDisabled=!1:this.submitButtonDisabled=!0},logUserIn:function(){var e=this;if(!this.submitButtonDisabled)return this.submitButtonDisabled=!0,this.$store.dispatch("AUTHENTICATE_USER",{email:this.form.email,password:this.form.password}).then(function(t){t?(e.welcomeMessage="You are logged in, ".concat(e.userName),e.$emit("modal:logged"),e.timeout=setTimeout(function(){e.showingLoginModal=!1},6e3)):(e.validateAllFields(),e.errorMessage="Wrong password or email does not exist")}).catch(function(e){console.log("error: ",e)})}},watch:{display:function(e){e&&(this.showingLoginModal=e)}}},m=g,f=(i("acfb"),i("2877")),p=Object(f["a"])(m,o,s,!1,null,"2cbdc909",null);p.options.__file="LogInModal.vue";t["default"]=p.exports}}]);
//# sourceMappingURL=xthon.umd.min.59.js.map