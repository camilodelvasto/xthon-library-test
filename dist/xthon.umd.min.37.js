(("undefined"!==typeof self?self:this)["webpackJsonpxthon"]=("undefined"!==typeof self?self:this)["webpackJsonpxthon"]||[]).push([[37],{"0bfb":function(e,t,i){"use strict";var n=i("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1028:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"field-wrapper layout-"+e.layout},[i("UserDialog",{attrs:{spinner:e.userDialogSpinner,state:e.userDialogModal,"disable-close":e.userDialogSpinner},on:{"modal:close":function(t){e.cancelEdition()}}},[i("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.userDialogHeading))]),i("div",{attrs:{slot:"content"},slot:"content"},[i("p",[e._v(e._s(e.userDialogMessage))])])]),i("div",{staticClass:"columns editable-field-wrapper"},[i("div",{staticClass:"column is-6"},[i("div",{on:{click:function(t){e.openEdition()}}},[i("transition",{attrs:{name:"slide-fade"}},[e.item.src||e.youTubeID&&e.fieldIsOpen?i("VuePlyrWrapper",[i("vue-plyr",{key:e.videoSource,ref:"plyr_"+e._uid},[i("div",{attrs:{"data-plyr-provider":"youtube","data-plyr-embed-id":e.videoSource}})])],1):e._e()],1)],1),e.fieldIsOpen?i("div",{staticClass:"video-input-wrapper"},[i("div",{staticClass:"field"},[e._m(0),i("div",{staticClass:"field-body"},[i("div",{staticClass:"field"},[i("p",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldValue,expression:"fieldValue"}],staticClass:"input-editable-value",attrs:{type:"text"},domProps:{value:e.fieldValue},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.saveVideo()},input:function(t){t.target.composing||(e.fieldValue=t.target.value)}}})])])])])]):e._e()]),i("div",{staticClass:"column is-6 image-control"},[i("div",{staticClass:"action-icons-wrapper",class:{"is-open":e.fieldIsOpen}},[i("div",{staticClass:"action-icon-wrapper",class:{"hide-icon":e.fieldIsOpen},on:{click:function(t){e.openEdition()}}},[i("Icons",{staticClass:"action-icon",attrs:{icon:"pencil",iconwidth:"16px",iconheight:"16px",color:"#FFF"}})],1),i("div",{staticClass:"action-icon-wrapper",class:{"hide-icon":!e.fieldIsOpen},on:{click:function(t){e.saveVideo()}}},[i("Icons",{staticClass:"action-icon",attrs:{icon:"check",iconwidth:"16px",iconheight:"16px",color:"#FFF"}})],1),i("div",{staticClass:"action-icon-wrapper",class:{"hide-icon":!e.fieldIsOpen},on:{click:function(t){e.cancelEdition()}}},[i("Icons",{staticClass:"action-icon",attrs:{icon:"close-circle",iconwidth:"16px",iconheight:"16px",color:"#FFF"}})],1)]),i("div",{staticClass:"button-wrapper"},[i("button",{staticClass:"button is-warning",on:{click:function(t){e.removeVideo()}}},[e._v("Remove")]),e.fieldIsOpen?i("button",{staticClass:"button is-success",on:{click:function(t){e.saveVideo()}}},[e._v("Save")]):e._e()]),e.fieldIsOpen?i("div",{staticClass:"instructions"},[i("p",[e._v("Paste the YouTube URL of your video, like https://www.youtube.com/watch?v=yXrlhebkpIQ")]),i("p",[e._v("Click save to process and store the video.")])]):e._e()])]),i("transition",{attrs:{name:"slide-fade"}},[e.errorMessage?i("div",{staticClass:"editable-error-message-wrapper"},[i("span",{staticClass:"editable-error-message"},[e._v(e._s(e.errorMessage))])]):e._e()])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"field-label is-normal"},[i("label",{staticClass:"label"},[e._v("Paste here the YouTube URL of your video:")])])}],s=i("4706"),a=i("2e53"),r=i("623f"),c={props:["item","layout","location","openId","openDefault"],data:function(){return{croppaObject:{},ratio:1,userDialogSpinner:!0,userDialogModal:!1,userDialogHeading:"Processing...",userDialogMessage:"",fieldIsOpen:!1,fieldValue:this.value,youTubeID:null,errorMessage:"",blurTimeout:null}},components:{Icons:s["default"],LazyLoadedImage:r["default"],VuePlyrWrapper:function(){return Promise.all([i.e(13),i.e(10)]).then(i.bind(null,"1096"))},UserDialog:function(){return i.e(1).then(i.bind(null,"b7cf"))}},computed:{calculateWidth:function(){if("undefined"===typeof window||"undefined"===typeof this.$el)return 400;var e=this.$el.clientWidth;return e<400?e-6:400},calculateHeight:function(){return this.calculateWidth*this.ratio},videoSource:function(){return this.fieldIsOpen?this.youTubeID||this.item.src:this.item.src||this.youTubeID}},mounted:function(){this.openDefault&&this.openEdition()},methods:{cancelEdition:function(){this.fieldIsOpen=!1,this.errorMessage="",this.userDialogModal=!1,this.$emit("edition:close",this._uid)},openEdition:function(){this.fieldIsOpen=!0,this.videoSource&&(this.fieldValue="https://www.youtube.com/watch?v=".concat(this.videoSource)),this.$emit("edition:open",this._uid)},removeVideo:function(){var e=this;"undefined"!==typeof this.item.id?this.$store.dispatch("REMOVE_VIDEO",{location:this.location,route:this.$route,id:this.item.id}).then(function(){e.cancelEdition()}).catch(function(e){console.log(e)}):this.cancelEdition()},saveVideo:function(){var e=this;if(!this.youTubeID)return this.userDialogModal=!0,this.userDialogMessage="Please add a valid YouTube URL.",void(this.userDialogSpinner=!1);this.userDialogModal=!0,this.userDialogSpinner=!0,this.item.src?this.$store.dispatch("UPDATE_VIDEO",{location:this.location,route:this.$route,oldSrc:this.item.src,newSrc:this.youTubeID}).then(function(){e.userDialogSpinner=!1,e.userDialogMessage="The video has been updated.",setTimeout(function(){e.cancelEdition()},4e3)}).catch(function(t){console.log(t),e.userDialogSpinner=!1,e.userDialogMessage="An error occurred. Please try again."}):this.$store.dispatch("ADD_VIDEO",{location:this.location,route:this.$route,youTubeID:this.youTubeID}).then(function(){e.userDialogSpinner=!1,e.userDialogMessage="The video has been added.",setTimeout(function(){e.cancelEdition()},4e3)}).catch(function(t){console.log(t),e.userDialogSpinner=!1,e.userDialogMessage="An error occurred. Please try again."})}},watch:{openId:function(e){this.fieldIsOpen&&e!==this._uid&&(this.fieldIsOpen=!1)},fieldValue:function(e){var t=a["b"](e);this.youTubeID=t||null}}},u=c,l=(i("2b8e"),i("2877")),d=Object(l["a"])(u,n,o,!1,null,"e90769de",null);d.options.__file="InlineVideoEditor.vue";t["default"]=d.exports},"2b8e":function(e,t,i){"use strict";var n=i("7e4f"),o=i.n(n);o.a},"2e53":function(e,t,i){"use strict";i.d(t,"d",function(){return n}),i.d(t,"f",function(){return o}),i.d(t,"g",function(){return s}),i.d(t,"i",function(){return a}),i.d(t,"k",function(){return r}),i.d(t,"h",function(){return c}),i.d(t,"j",function(){return u}),i.d(t,"l",function(){return l}),i.d(t,"c",function(){return d}),i.d(t,"e",function(){return f}),i.d(t,"o",function(){return h}),i.d(t,"m",function(){return p}),i.d(t,"n",function(){return g}),i.d(t,"b",function(){return v}),i.d(t,"a",function(){return b});i("4917"),i("a481"),i("6b54");function n(e){var t=/^(?:[a-z0-9!#$%&amp;'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/;return t.test(String(e).toLowerCase())}function o(e){return!!(e&&e.length>=2)}function s(e){var t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W|_])[A-Za-z\d\W|_]{8,}/;return t.test(String(e))}function a(e){return e.length>=8}function r(e){var t=/^(?=.*\d)/;return t.test(String(e))}function c(e){var t=/^(?=.*[A-Z])/;return t.test(String(e))}function u(e){var t=/^(?=.*[a-z])/;return t.test(String(e))}function l(e){var t=/\W|_/g;return t.test(String(e))}function d(e){return!!e&&16===e.toString().length}function f(e,t){var i=new Date,n=i.getFullYear()-2e3;return t>n||e>=i.getMonth()&&t===n}function h(e){return!!e&&5===e.toString().length}function p(e,t){var i=/<[a-z\/][\s\S]*>/i;return!i.test(e)&&(!(!e||0===e.replace(/[\n\r]/g,"").length)||!!t)}function g(e){var t=/^((http|https):\/\/)?(www.)?[a-z0-9]+\.[a-z]+(\/[a-zA-Z0-9#]+\/?)*$/;return!!t.test(e)}function v(e){if(!e)return null;var t=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=e.match(t);return i&&11===i[2].length?i[2]:null}function b(e,t,i){var n=e&&isNaN(e.charAt(e.length-1)),o=e&&e.length>i;return n||o?t:e}},3846:function(e,t,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},4917:function(e,t,i){i("214f")("match",1,function(e,t,i){return[function(i){"use strict";var n=e(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,n):new RegExp(i)[t](String(n))},i]})},"6b54":function(e,t,i){"use strict";i("3846");var n=i("cb7c"),o=i("0bfb"),s=i("9e1e"),a="toString",r=/./[a],c=function(e){i("2aba")(RegExp.prototype,a,e,!0)};i("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?o.call(e):void 0)}):r.name!=a&&c(function(){return r.call(this)})},"7e4f":function(e,t,i){}}]);
//# sourceMappingURL=xthon.umd.min.37.js.map