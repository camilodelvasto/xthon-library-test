(("undefined"!==typeof self?self:this)["webpackJsonpxthon"]=("undefined"!==typeof self?self:this)["webpackJsonpxthon"]||[]).push([[23,55],{"1da7":function(t,e,n){},"231d":function(t,e,n){"use strict";var o=n("3d47"),i=n.n(o);i.a},"33d9":function(t,e,n){},3642:function(t,e,n){"use strict";var o=n("c3e8"),i=n.n(o);i.a},3851:function(t,e,n){"use strict";var o=n("b176"),i=n.n(o);i.a},"3aab":function(t,e,n){"use strict";var o=n("914d"),i=n.n(o);i.a},"3d47":function(t,e,n){},"5a10":function(t,e,n){"use strict";var o=n("33d9"),i=n.n(o);i.a},"64a9":function(t,e,n){},"68b5":function(t,e,n){},"6c29":function(t,e,n){},"75fb":function(t,e,n){"use strict";var o=n("964a"),i=n.n(o);i.a},"880d":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DonateError",{attrs:{state:t.donateErrorModal},on:{"modal:close":function(e){t.handleDonateError()}}}),n("DonateProcessing",{attrs:{state:t.donateProcessingModal},on:{"modal:close":function(e){t.handleDonateError()}}}),n("DonateFormHeading",{attrs:{parent:t.parent,nonprofit:t.nonprofit,fundraiser:t.fundraiser}}),n("form",{on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.validateSubmit()}}},[n("DonationBoxes",{attrs:{"giving-levels":t.givingLevels},on:{"input:box":function(e){t.donation.amount=e},"input:level":function(e){t.donation.givingLevel=e}}}),n("DonationFrequency",{on:{"input:frequency":function(e){t.donation.frequency=e}}}),t.loggedIn?t._e():n("div",{staticClass:"billing-info"},[n("span",{staticClass:"login-link"},[n("LogInModal",{on:{success:function(e){t.validateAllFields()}}},[n("h2",{attrs:{slot:"trigger"},slot:"trigger"},[n("a",[t._v("Log in to use stored info »")])])])],1)]),t.userName?t._e():n("InputName",{attrs:{label:"Email (for the receipt):",required:!0,"error-message":t.nameErrorMsg},on:{"input:valid":function(e){t.validateAllFields()},"input:invalid":function(e){t.validateAllFields()},"input:first":function(e){t.donation.firstname=e,t.errorMessage=""},"input:last":function(e){t.donation.lastname=e,t.errorMessage=""}}}),n("DonationComment",{attrs:{fundraiser:t.fundraiser},on:{"input:anonymous":function(e){t.donation.isAnonymous=e},"input:comment":function(e){t.donation.comment=e}}}),t.loggedIn?t._e():n("InputEmail",{attrs:{label:"Email (for the receipt):",required:!0,"error-message":t.emailErrorMsg},on:{"input:valid":function(e){t.validateAllFields()},"input:invalid":function(e){t.validateAllFields()},"input:email":function(e){t.donation.email=e,t.errorMessage=""}}}),t.loggedIn?t._e():n("div",{staticClass:"billing-method"},[n("DonatePasswordModal",{key:t.donation.email,attrs:{"modal-active":t.accountNeededModal,parent:t.parent,fundraiser:t.fundraiser,nonprofit:t.nonprofit,email:t.donation.email,donation:t.donation},on:{"close:modal":function(e){t.accountNeededModal=!1},success:function(e){t.authorize(),t.submitDonate()},error:function(e){t.unauthorize()}}}),n("DonateBillingMethod",{attrs:{payment:t.donation.paymentMethod},on:{"input:method":function(e){t.donation.paymentMethod.method=e},"input:card":function(e){t.donation.paymentMethod.cardNumber=e},"input:month":function(e){t.donation.paymentMethod.expirationMonth=e},"input:year":function(e){t.donation.paymentMethod.expirationYear=e},"input:code":function(e){t.donation.paymentMethod.securityCode=e},"input:save":function(e){t.donation.paymentMethod.savePaymentMethod=e},"form:valid":function(e){t.newPaymentMethodIsValid=!0,t.validateAllFields()},"form:invalid":function(e){t.newPaymentMethodIsValid=!1,t.validateAllFields()}}})],1),n("StoredPaymentMethods",{attrs:{"payment-methods":t.paymentMethods,"is-new-payment-method":t.donation.isNewPaymentMethod},on:{"toggle:paymentMethod":function(e){t.toggleNewPaymentMethod()},"input:storedPaymentMethod":function(e){t.donation.storedPaymentMethod=e}}}),t.loggedIn?n("div",{staticClass:"billing-info logged-in"},[t.donation.isNewPaymentMethod||!t.paymentMethods.length?n("DonateBillingMethod",{attrs:{payment:t.donation.paymentMethod},on:{"input:method":function(e){t.donation.paymentMethod.method=e},"input:card":function(e){t.donation.paymentMethod.cardNumber=e},"input:month":function(e){t.donation.paymentMethod.expirationMonth=e},"input:year":function(e){t.donation.paymentMethod.expirationYear=e},"input:code":function(e){t.donation.paymentMethod.securityCode=e},"input:save":function(e){t.donation.paymentMethod.savePaymentMethod=e},"input:zip":function(e){t.donation.paymentMethod.billingZip=e},"form:valid":function(e){t.newPaymentMethodIsValid=!0,t.validateAllFields()},"form:invalid":function(e){t.newPaymentMethodIsValid=!1,t.validateAllFields()}}}):t._e()],1):t._e(),n("div",[n("div",{staticClass:"form-submit-wrapper",on:{click:function(e){e.preventDefault(),t.submitDonate()}}},[n("button",{staticClass:"button is-large is-danger",attrs:{disabled:t.submitButtonDisabled}},[t._v("\n          "+t._s(t.submitButtonLabel||"Donate"))]),t._m(0)])])],1)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"small-text"},[t._v("By clicking Donate, you agree to the "),n("a",[t._v("Terms and Conditions")]),t._v(".")])}],a=n("e3b4"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"slide-fade"}},[n("div",{staticClass:"columns is-centered"},[t.loggedIn?n("p",{staticClass:"login-highlight"},[n("strong",[t._v(t._s(t.userFirstName))]),t._v(", you're logged in, so we'll use your email and name on file.")]):t._e()])]),"nonprofit"===t.parent?n("h2",{staticClass:"page-title"},[n("span",{staticClass:"page-title__first"},[t._v("Donate to")]),n("span",{staticClass:"page-title__second"},[t._v(t._s(t.nonprofit.NAME))])]):t._e(),"fundraiser"===t.parent&&t.fundraiser.participant?n("h2",{staticClass:"page-title"},[n("span",{staticClass:"page-title__first"},[t._v("Support "+t._s(t.fundraiser.participant.name)+"'s Volunteerathon")]),n("span",{staticClass:"page-title__\n    "},[t._v(t._s(t.fundraiser.name))])]):t._e()],1)},r=[],l={props:["parent","nonprofit","fundraiser"],computed:{loggedIn:function(){return this.$store.state.user.loggedIn},userFirstName:function(){return this.$store.state.user.firstname}}},d=l,u=(n("3851"),n("2877")),c=Object(u["a"])(d,s,r,!1,null,"5f89af85",null);c.options.__file="DonateFormHeading.vue";var m=c.exports,p=n("a6f6"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal",class:{"is-active":t.modalActive},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.validateSubmit()}}},[n("div",{staticClass:"modal-background"}),n("div",{staticClass:"modal-content donate-view donate-view__wrapper inner-close small-modal"},[n("h1",{staticClass:"modal-title"},[t._v("You are about to donate")]),n("div",[t.emailFound&&!t.socialLogin?n("div",[n("p",[t._v("\n            The email "+t._s(t.email)+" is already in use with an existing account. To save a payment method or make a recurring donation, you must either enter the password for the existing account:\n          ")]),n("InputPassword",{attrs:{label:"Password",required:!0,duplicate:!1,"provide-feedback":!1,"error-message":t.errorMessage},on:{"input:valid":function(e){t.validateAllFields()},"input:invalid":function(e){t.validateAllFields()},"input:password":function(e){t.form.password=e,t.errorMessage=""}}}),n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line password-input-wrapper"},[n("div",{staticClass:"column is-5 form-column__label-column input-label"}),n("div",{staticClass:"column is-5 form-column__input-column"},[n("ModalForgetPassword")],1)])],1):t._e(),t.emailFound&&t.socialLogin?n("div",[n("p",[t._v("\n            The email "+t._s(t.email)+" is already in use with an existing account. To save a payment method or make a recurring donation, you must either log in using the service you used to create your account:\n          ")]),n("LogInModal",{attrs:{layout:"social-signup","show-only":t.socialLogin}})],1):t._e(),t.emailFound?t._e():n("div",[n("p",[t._v("To save the payment method or make a recurring donation, you must create a free account. Do this by either entering a password:")]),n("InputPassword",{attrs:{label:"Password",required:!0,duplicate:!0,"provide-feedback":!0},on:{"input:valid":function(e){t.validateAllFields()},"input:invalid":function(e){t.validateAllFields()},"input:password":function(e){t.form.password=e,t.errorMessage=""},"input:passwordConfirmation":function(e){t.form.passwordConfirmation=e,t.errorMessage=""}}})],1),t.emailFound?t._e():n("div",{staticClass:"columns is-centered padded-more"},[t._v("\n          Your username will be the email you already entered. You can change it later.\n        ")])]),t.socialLogin?t._e():n("div",[n("div",{staticClass:"form-submit-wrapper",on:{click:function(e){e.preventDefault(),t.submitPassword()}}},[n("button",{staticClass:"button is-large is-danger",attrs:{disabled:t.submitButtonDisabled}},[t._v("Submit")])])]),t.emailFound?t._e():n("div",[n("p",[t._v("Or sign up using a service: ")]),n("LogInModal",{attrs:{layout:"social-signup"}})],1),!t.emailFound||t.emailFound&&t.socialLogin?n("div",{staticClass:"columns is-centered padded-more"},[t.emailFound?n("span",[t._v("\n          (After you log in, your donation will go through)\n        ")]):t._e(),t.emailFound?t._e():n("span",[t._v("\n          (After you sign up, your donation will go through)\n        ")])]):t._e(),n("p",[t._v("Or click "),n("a",{on:{click:function(e){t.closeModal()}}},[t._v("here")]),t._v(" to return to the previous screen and deselect the option for "),n("strong",[t._v("saving the payment method")]),t._v(" or "),n("strong",[t._v("making a recurring donation")]),t._v(", in which case no account is needed. ")]),n("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){e.preventDefault(),t.closeModal()}}})])])])},h=[],v=n("4706"),g=n("9c9c"),_=n("853f"),y=n("a0d0"),b=n("2e53"),M={props:["parent","fundraiser","nonprofit","modalActive","email","donation"],data:function(){return{errorMessage:"",form:{},emailFound:!1,socialLogin:null,submitButtonDisabled:!0,authorized:!1}},components:{Icons:v["default"],InputPassword:g["default"],LogInModal:a["default"],Modal:y["default"],ModalForgetPassword:_["a"]},methods:{closeModal:function(){this.$emit("close:modal")},validateSubmit:function(){this.validateAllFields(),this.submitButtonDisabled||this.submitPassword()},validateAllFields:function(){var t=b["g"](this.form.password),e=t&&this.form.password===this.form.passwordConfirmation;t&&e||t&&this.emailFound?this.submitButtonDisabled=!1:this.submitButtonDisabled=!0},submitPassword:function(){var t=this;this.submitButtonDisabled=!0,this.authorized=!0,this.emailFound?this.$store.dispatch("AUTHENTICATE_USER",{email:this.email,password:this.form.password,firstname:this.firstname}).then(function(e){e?t.$emit("success"):(t.submitButtonDisabled=!1,t.errorMessage="Wrong password")}).catch(function(e){t.$emit("error"),console.log("error: ",e)}):this.$store.dispatch("CREATE_USER",{email:this.email,password:this.form.password,firstname:this.donation.firstname,lastname:this.donation.lastname}).then(function(e){t.$emit("success")}).catch(function(e){t.$emit("error"),console.log("error: ",e)})}},watch:{modalActive:function(){var t=this;return this.$store.dispatch("LOOK_UP_EMAIL",{email:this.email}).then(function(e){e?(t.emailFound=!0,t.socialLogin=e.social_login):t.emailFound=!1}).catch(function(t){console.log(t)})}}},C=M,w=(n("9917"),Object(u["a"])(C,f,h,!1,null,"c5e8d4b8",null));w.options.__file="DonatePasswordModal.vue";var P=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"columns boxes-wrapper is-multiline",attrs:{id:"top"}},[t._l(t.boxes,function(e){return t.givingLevels?t._e():n("div",{staticClass:"amount-box column is-4 is-6-mobile"},[n("div",{staticClass:"amount-box__inner",class:{selected:e===t.donation.amount&&!t.donation.isCustomAmount},on:{click:function(n){t.selectAmount(e)}}},[t._v("\n        "+t._s(t._f("usd")(e))+"\n      ")])])}),t._l(t.givingLevels,function(e){return t.givingLevels?n("div",{staticClass:"amount-box amount-box-giving-levels column is-6 is-6-mobile"},[n("div",{staticClass:"amount-box__inner",class:{selected:e.amount===t.donation.amount&&!t.donation.isCustomAmount},on:{click:function(n){t.selectLevel(e)}}},[n("p",[t._v(t._s(t._f("usd")(e.amount)))]),n("p",{staticClass:"small-text"},[t._v(t._s(e.tagline))])])]):t._e()})],2),n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line custom-amount-wrapper"},[n("div",{staticClass:"column is-5 form-column__label-column input-label"},[n("label",{staticClass:"label",attrs:{for:"custom-amount-input_"+t._uid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donation.isCustomAmount,expression:"donation.isCustomAmount"}],staticClass:"pad-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.donation.isCustomAmount)?t._i(t.donation.isCustomAmount,null)>-1:t.donation.isCustomAmount},on:{change:function(e){var n=t.donation.isCustomAmount,o=e.target,i=!!o.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);o.checked?s<0&&t.$set(t.donation,"isCustomAmount",n.concat([a])):s>-1&&t.$set(t.donation,"isCustomAmount",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.donation,"isCustomAmount",i)}}}),t._v("\n        Other amount:\n      ")])]),n("div",{staticClass:"column is-3 form-column__input-column"},[n("div",{staticClass:"control input-wrapper"},[n("Icons",{staticClass:"input-icon",attrs:{icon:"usd",iconwidth:"20px",iconheight:"20px",color:"#999"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.donation.customAmount,expression:"donation.customAmount"}],staticClass:"input custom-amount-input",attrs:{id:"custom-amount-input_"+t._uid,type:"number",name:"amount",placeholder:t.donation.customAmount,disabled:!t.donation.isCustomAmount},domProps:{value:t.donation.customAmount},on:{input:function(e){e.target.composing||t.$set(t.donation,"customAmount",e.target.value)}}})],1)])])])},A=[],N={components:{Icons:v["default"]},data:function(){return{boxes:[25,50,100,250,500,1e3],donation:{amount:350,customAmount:350,isCustomAmount:!0}}},props:["givingLevels"],computed:{loggedIn:function(){return this.$store.state.user.loggedIn},userFirstName:function(){return this.$store.state.user.firstname}},methods:{selectAmount:function(t){this.donation.isCustomAmount=!1,this.donation.amount=t,this.$emit("input:box",t)},selectLevel:function(t){this.donation.isCustomAmount=!1,this.donation.amount=t.amount,this.$emit("input:box",t.amount),this.$emit("input:level",t)}}},E=N,$=(n("75fb"),Object(u["a"])(E,x,A,!1,null,"7316b827",null));$.options.__file="DonationBoxes.vue";var k=$.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line"},[n("div",{staticClass:"column is-2 form-column__input-column frequency"},[n("div",{staticClass:"control"},[n("label",{staticClass:"radio",attrs:{for:"frequency-once_"+t._uid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donation.frequency,expression:"donation.frequency"}],attrs:{type:"radio",name:"freq",id:"frequency-once_"+t._uid,value:"once"},domProps:{checked:t._q(t.donation.frequency,"once")},on:{change:function(e){t.$set(t.donation,"frequency","once")}}}),t._v("\n        Once\n      ")]),n("label",{staticClass:"radio",attrs:{for:"frequency-monthly_"+t._uid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donation.frequency,expression:"donation.frequency"}],attrs:{type:"radio",name:"freq",id:"frequency-monthly_"+t._uid,value:"monthly"},domProps:{checked:t._q(t.donation.frequency,"monthly")},on:{change:function(e){t.$set(t.donation,"frequency","monthly")}}}),t._v("\n        Monthly\n      ")]),n("label",{staticClass:"radio",attrs:{for:"frequency-quarterly_"+t._uid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donation.frequency,expression:"donation.frequency"}],attrs:{type:"radio",name:"freq",id:"frequency-quarterly_"+t._uid,value:"quarterly"},domProps:{checked:t._q(t.donation.frequency,"quarterly")},on:{change:function(e){t.$set(t.donation,"frequency","quarterly")}}}),t._v("\n        Quarterly\n      ")]),n("label",{staticClass:"radio",attrs:{for:"frequency-annually_"+t._uid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donation.frequency,expression:"donation.frequency"}],attrs:{type:"radio",name:"freq",id:"frequency-annually_"+t._uid,value:"annually"},domProps:{checked:t._q(t.donation.frequency,"annually")},on:{change:function(e){t.$set(t.donation,"frequency","annually")}}}),t._v("\n        Annually\n      ")])])])])},D=[],F={data:function(){return{donation:{frequency:"once"}}},watch:{"donation.frequency":function(t){this.$emit("input:frequency",t)}}},q=F,L=(n("231d"),Object(u["a"])(q,I,D,!1,null,"0a59d49a",null));L.options.__file="DonationFrequency.vue";var B=L.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.fundraiser?n("div",{staticClass:"centered is-gift-wrapper"},[n("label",{staticClass:"checkbox",attrs:{for:"anonymous-donation_"+t._uid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donation.isAnonymous,expression:"donation.isAnonymous"}],attrs:{type:"checkbox",id:"anonymous-donation_"+t._uid},domProps:{checked:Array.isArray(t.donation.isAnonymous)?t._i(t.donation.isAnonymous,null)>-1:t.donation.isAnonymous},on:{change:function(e){var n=t.donation.isAnonymous,o=e.target,i=!!o.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);o.checked?s<0&&t.$set(t.donation,"isAnonymous",n.concat([a])):s>-1&&t.$set(t.donation,"isAnonymous",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.donation,"isAnonymous",i)}}}),t._v("\n        Make donation anonymously\n    ")])]):t._e(),t.donation.isAnonymous?t._e():n("transition",{attrs:{name:"slide-fade"}},[t.fundraiser&&t.fundraiser.participant?n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line comment-input-wrapper"},[n("div",{staticClass:"column is-5 form-column__label-column input-label comment-input-label"},[n("label",{staticClass:"label",attrs:{for:"comment-textarea_"+t._uid}},[t._v("Add a comment to appear next to your donation on "+t._s(t.fundraiser.participant.name)+"'s page:")])]),n("div",{staticClass:"column is-5 form-column__input-column"},[n("div",{staticClass:"control input-wrapper"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.donation.comment,expression:"donation.comment"}],staticClass:"comment-input",attrs:{id:"comment-textarea_"+t._uid,name:"comment",placeholder:""},domProps:{value:t.donation.comment},on:{input:function(e){e.target.composing||t.$set(t.donation,"comment",e.target.value)}}}),t.userName?n("div",{staticClass:"small-text"},[t._v("Commenting as "+t._s(t.userName))]):t._e()])])]):t._e()])],1)},T=[],S={props:["fundraiser"],data:function(){return{donation:{comment:"",isAnonymous:!1}}},computed:{userName:function(){return this.$store.state.user.userName}},watch:{"donation.isAnonymous":function(t){this.$emit("input:anonymous",t)},"donation.comment":function(t){this.$emit("input:comment",t)}}},Y=S,Z=(n("de78"),Object(u["a"])(Y,O,T,!1,null,"1335f212",null));Z.options.__file="DonationComment.vue";var U=Z.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{staticClass:"donate-error-modal",attrs:{"prevent-body-scroll":!1,state:t.state},on:{"modal:close":function(e){t.dismiss()}}},[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("The donation didn't go through")]),n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[t._v("Your donation couldn't be processed. Please try again with a different payment method or introduce your payment method data again.")]),n("div",{staticClass:"is-centered dismiss-cta",on:{click:function(e){t.dismiss()}}},[n("div",{staticClass:"button is-centered is-large is-warning"},[t._v("Dismiss")])])])])},z=[],V={props:["state"],components:{Modal:y["default"]},methods:{dismiss:function(){this.$emit("modal:close")}}},R=V,H=(n("3642"),Object(u["a"])(R,j,z,!1,null,"d9f06a9a",null));H.options.__file="DonateError.vue";var G=H.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{staticClass:"donate-error-modal",attrs:{"prevent-body-scroll":!1,state:t.state,disableClose:!0}},[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("Almost there!")]),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"columns is-centered"},[n("p",[t._v("Hang tight, we are processing your donation...")])]),n("div",{staticClass:"spinner"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})])])])},W=[],K={props:["state"],components:{Modal:y["default"]}},Q=K,X=(n("cff3"),Object(u["a"])(Q,J,W,!1,null,"0b7b1abf",null));X.options.__file="DonateProcessing.vue";var tt=X.exports,et=n("ba03"),nt=n("a4ab"),ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loggedIn?n("div",{staticClass:"stored-payment-methods-wrapper billing-info centered logged-in"},[t._m(0),!t.isNewPaymentMethod&&t.paymentMethods&&t.paymentMethods.length?n("div",[n("p",[n("label",{attrs:{for:"stored-payment-method_"+t._uid}},[t._v("Choose an existing payment method:")])]),n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.donation.storedPaymentMethod,expression:"donation.storedPaymentMethod"}],attrs:{id:"stored-payment-method_"+t._uid},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.donation,"storedPaymentMethod",e.target.multiple?n:n[0])}}},t._l(t.paymentMethods,function(e){return n("option",{attrs:{disabled:!t.isValidPaymentMethod(e)},domProps:{value:e}},[t._v(t._s("Card ending in "+e.last_four)+" - "+t._s(e.expiration_month)+"/"+t._s(e.expiration_year))])}))])]):t._e(),!t.isNewPaymentMethod&&t.paymentMethods.length?n("p",{staticClass:"add-payment-method__cta",on:{click:function(e){t.toggleNewPaymentMethod()}}},[n("a",[t._v("Use a new payment method")])]):t._e(),t.isNewPaymentMethod&&t.paymentMethods.length?n("p",{staticClass:"add-payment-method__cta",on:{click:function(e){t.toggleNewPaymentMethod()}}},[n("a",[t._v("Use a stored payment method instead")])]):t._e()]):t._e()},it=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("span",[t._v("Payment method")])])}],at={props:["paymentMethods","isNewPaymentMethod"],data:function(){return{donation:{storedPaymentMethod:null}}},computed:{userName:function(){return this.$store.state.user.userName},loggedIn:function(){return this.$store.state.user.loggedIn}},methods:{isValidPaymentMethod:function(t){return b["e"](t.expiration_month,t.expiration_year)},toggleNewPaymentMethod:function(){this.$emit("toggle:paymentMethod")}},watch:{"donation.storedPaymentMethod":function(t){this.$emit("input:storedPaymentMethod",t)}}},st=at,rt=(n("c222"),Object(u["a"])(st,ot,it,!1,null,"067b75be",null));rt.options.__file="StoredPaymentMethods.vue";var lt=rt.exports,dt={props:["submitButtonLabel","trigger","givingLevels","parent","nonprofit","fundraiser"],components:{DonateBillingMethod:p["default"],DonateFormHeading:m,DonateError:G,DonatePasswordModal:P,DonateProcessing:tt,DonationBoxes:k,DonationComment:U,DonationFrequency:B,InputEmail:et["default"],InputName:nt["a"],LogInModal:a["default"],StoredPaymentMethods:lt},data:function(){return{accountNeededModal:!1,accountCleared:!1,volunteerFor:"",nonprofitIs:"",emailErrorMsg:"Please enter a valid Email",nameErrorMsg:"This field is required",firstnameErrorMsg:"",lastnameErrorMsg:"",newPaymentMethodIsValid:!1,submitButtonDisabled:!0,donateErrorModal:!1,donateProcessingModal:!1,donation:{isNewPaymentMethod:!1,paymentMethod:{method:"card",cardNumber:null,expirationMonth:null,expirationYear:null,securityCode:null,savePaymentMethod:!0,billingZip:null},storedPaymentMethod:{cardId:null,lastFour:null,expirationMonth:null,expirationYear:null},firstname:null,lastname:null,amount:350,isAnonymous:!1,isGift:!1,givingLevel:{},email:"",frequency:"",comment:"",trigger:this.trigger}}},methods:{submitDonate:function(){this.submitButtonDisabled=!0,!this.accountNeeded||this.accountCleared||this.loggedIn?this.sendPaymentData():(this.accountNeededModal=!0,this.submitButtonDisabled=!1)},validateSubmit:function(){this.submitButtonDisabled||this.submitDonate()},unauthorize:function(){this.submitButtonDisabled=!1},authorize:function(){this.accountCleared=!0,this.accountNeededModal=!1},toggleNewPaymentMethod:function(){this.donation.isNewPaymentMethod=!this.donation.isNewPaymentMethod},handleDonateError:function(){this.donateErrorModal=!1,this.donation.paymentMethod={},this.donation.isNewPaymentMethod=!0,this.donation.paymentMethod.expiration_month=null,this.donation.paymentMethod.expiration_year=null,this.donation.paymentMethod.cardNumber=null,this.donation.paymentMethod.securityCode=null},validateAllFields:function(){var t=b["d"](this.donation.email),e=t&&this.donation.lastname&&this.donation.firstname&&this.newPaymentMethodIsValid,n=this.loggedIn&&this.newPaymentMethodIsValid&&this.donation.isNewPaymentMethod,o=!!this.donation.storedPaymentMethod&&b["e"](this.donation.storedPaymentMethod.expiration_month,this.donation.storedPaymentMethod.expiration_year),i=this.loggedIn&&!this.donation.isNewPaymentMethod&&o;this.submitButtonDisabled=!(e||n||i)},sendPaymentData:function(){var t=this;return this.donateProcessingModal=!0,this.$store.dispatch("SEND_DONATION",{donation:this.donation}).then(function(e){t.$emit("success",{data:e}),t.donateProcessingModal=!1}).catch(function(e){t.donateErrorModal=!0,t.donateProcessingModal=!1,console.log(e)})}},computed:{loggedIn:function(){return this.$store.state.user.loggedIn},userName:function(){return this.$store.state.user.fullname},paymentMethods:function(){return this.$store.state.user.payment_methods},accountNeeded:function(){return"once"!==this.donation.frequency||this.donation.paymentMethod.savePaymentMethod}},mounted:function(){this.validateAllFields()},watch:{"donation.firstname":function(t,e){this.validateAllFields(),this.firstnameErrorMsg=t?"":"This field is required"},"donation.lastname":function(t,e){this.validateAllFields(),this.lastnameErrorMsg=t?"":"This field is required"},"donation.email":function(t,e){this.validateAllFields(),t&&t.length>3&&(b["d"](t)?this.emailErrorMsg="":this.emailErrorMsg="Email is invalid")},"donation.isNewPaymentMethod":function(t){this.validateAllFields()},"donation.storedPaymentMethod":function(t,e){this.validateAllFields()},loggedIn:function(t){t?(this.$emit("logged:in"),this.donation.paymentMethod.cardNumber&&(this.donation.isNewPaymentMethod=!0)):this.$emit("logged:out")}}},ut=dt,ct=(n("3aab"),Object(u["a"])(ut,o,i,!1,null,"7a5eca43",null));ct.options.__file="DonateForm.vue";e["default"]=ct.exports},"914d":function(t,e,n){},9578:function(t,e,n){},"964a":function(t,e,n){},9917:function(t,e,n){"use strict";var o=n("64a9"),i=n.n(o);i.a},a6f6:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"billing-info"},[n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line"},[n("div",{staticClass:"column is-2 form-column__input-column method"},[n("div",{staticClass:"control"},[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.payment.method,expression:"payment.method"}],attrs:{type:"radio",name:"method",value:"card"},domProps:{checked:t._q(t.payment.method,"card")},on:{input:function(e){t.$emit("input:method",e.target.value)},change:function(e){t.$set(t.payment,"method","card")}}}),t._v("\n            Credit Card\n          ")]),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.payment.method,expression:"payment.method"}],attrs:{type:"radio",name:"method",value:"paypal"},domProps:{checked:t._q(t.payment.method,"paypal")},on:{input:function(e){t.$emit("input:method",e.target.value)},change:function(e){t.$set(t.payment,"method","paypal")}}}),t._v("\n            PayPal\n          ")]),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.payment.method,expression:"payment.method"}],attrs:{type:"radio",name:"method",value:"check"},domProps:{checked:t._q(t.payment.method,"check")},on:{input:function(e){t.$emit("input:method",e.target.value)},change:function(e){t.$set(t.payment,"method","check")}}}),t._v("\n            Check\n          ")])])])]),n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line input-card-number is-multiline"},[t._m(0),n("div",{staticClass:"column is-5 form-column__input-column"},[n("div",{staticClass:"control input-wrapper"},[n("Icons",{staticClass:"input-icon",attrs:{icon:"credit-card",iconwidth:"20px",iconheight:"20px",color:"#999"}}),n("input",{staticClass:"input",attrs:{type:"text",placeholder:"0000 0000 0000 0000"},domProps:{value:t.payment.cardNumber},on:{input:function(e){t.$emit("input:card",e.target.value)}}})],1)]),t.creditCardNumberErrorMessage?n("div",{staticClass:"column is-5 is-offset-5"},[n("span",{staticClass:"error-message"},[t._v(t._s(t.creditCardNumberErrorMessage))])]):t._e()]),n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line input-expiry-number is-multiline"},[t._m(1),n("div",{staticClass:"column is-3 form-column__input-column"},[n("div",{staticClass:"select"},[n("select",{domProps:{value:t.payment.expirationMonth},on:{input:function(e){t.$emit("input:month",e.target.value)}}},t._l([1,2,3,4,5,6,7,8,9,10,11,12],function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e))])}))]),n("div",{staticClass:"select"},[n("select",{domProps:{value:t.payment.expirationYear},on:{input:function(e){t.$emit("input:year",e.target.value)}}},t._l(t.getYearArray(),function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e))])}))])]),t.expirationDateErrorMessage?n("div",{staticClass:"column is-5 is-offset-5"},[n("span",{staticClass:"error-message"},[t._v(t._s(t.expirationDateErrorMessage))])]):t._e()]),n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line input-card-code"},[t._m(2),n("div",{staticClass:"column is-2 form-column__input-column"},[n("div",{staticClass:"control input-wrapper"},[n("Icons",{staticClass:"input-icon",attrs:{icon:"lock",iconwidth:"20px",iconheight:"20px",color:"#999"}}),n("input",{staticClass:"input",attrs:{type:"text",name:"security-code",placeholder:"",min:"0",max:"9999",autocomplete:"off"},domProps:{value:t.payment.securityCode},on:{input:function(e){t.$emit("input:code",e.target.value)}}})],1)]),n("div",{staticClass:"column is-4 form-column__input-column save-method"},[n("label",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.payment.savePaymentMethod,expression:"payment.savePaymentMethod"}],attrs:{type:"checkbox",name:"payment-method"},domProps:{value:t.payment.savePaymentMethod,checked:Array.isArray(t.payment.savePaymentMethod)?t._i(t.payment.savePaymentMethod,t.payment.savePaymentMethod)>-1:t.payment.savePaymentMethod},on:{click:function(e){t.$emit("input:save",e.target.value)},change:function(e){var n=t.payment.savePaymentMethod,o=e.target,i=!!o.checked;if(Array.isArray(n)){var a=t.payment.savePaymentMethod,s=t._i(n,a);o.checked?s<0&&t.$set(t.payment,"savePaymentMethod",n.concat([a])):s>-1&&t.$set(t.payment,"savePaymentMethod",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.payment,"savePaymentMethod",i)}}}),t._v("\n            Save the payment method\n        ")])])]),n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line input-zip is-multiline"},[t._m(3),n("div",{staticClass:"column is-2 form-column__input-column"},[n("div",{staticClass:"control input-wrapper"},[n("Icons",{staticClass:"input-icon",attrs:{icon:"location",iconwidth:"20px",iconheight:"20px",color:"#999"}}),n("input",{directives:[{name:"model",rawName:"v-model:value",value:t.payment.billingZip,expression:"payment.billingZip",arg:"value"}],staticClass:"input",attrs:{type:"text",placeholder:"00000"},domProps:{value:t.payment.billingZip},on:{input:[function(e){e.target.composing||t.$set(t.payment,"billingZip",e.target.value)},function(e){t.$emit("input:zip",e.target.value)}]}})],1)]),t.billingZipErrorMessage?n("div",{staticClass:"column is-5 is-offset-5"},[n("span",{staticClass:"error-message"},[t._v(t._s(t.billingZipErrorMessage))])]):t._e()])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column is-5 form-column__label-column input-label"},[n("label",{staticClass:"label"},[t._v("Card Number:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column is-5 form-column__label-column input-label"},[n("label",{staticClass:"label"},[t._v("Expiration date (MM/YY):")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column is-5 form-column__label-column input-label"},[n("label",{staticClass:"label"},[t._v("Security Code:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column is-5 form-column__label-column input-label"},[n("label",{staticClass:"label"},[t._v("Billing zip code :")])])}],a=n("4706"),s=n("2e53"),r={props:{payment:{type:Object,required:!0}},data:function(){return{creditCardNumberErrorMessage:"",expirationDateErrorMessage:"",billingZipErrorMessage:"",timeoutCardNumber:null,timeoutZip:null}},components:{Icons:a["default"]},methods:{getYearArray:function(){for(var t=(new Date).getFullYear()-2e3,e=[],n=t;n<t+12;n++)e.push(n);return e},validateAllFields:function(){var t=s["c"](this.payment.cardNumber),e=s["k"](this.payment.securityCode),n=s["e"](this.payment.expirationMonth,this.payment.expirationYear),o=s["o"](this.payment.billingZip);return t&&n&&e&&o?(this.$emit("form:valid"),!0):(this.$emit("form:invalid"),!1)}},watch:{"payment.cardNumber":function(t,e){var n=this;this.creditCardNumberErrorMessage="",this.validateAllFields(),this.payment.cardNumber=s["a"](t,e,16),clearTimeout(this.timeoutCardNumber),this.timeoutCardNumber=setTimeout(function(){s["c"](t)?n.creditCardNumberErrorMessage="":n.creditCardNumberErrorMessage="Please enter all the digits"},5e3)},"payment.expirationMonth":function(t,e){this.validateAllFields()},"payment.expirationYear":function(t,e){this.validateAllFields()},"payment.securityCode":function(t,e){this.validateAllFields(),this.payment.securityCode=s["a"](t,e,4)},"payment.billingZip":function(t,e){this.validateAllFields(),this.payment.billingZip=s["a"](t,e,5);var n=this;this.billingZipErrorMessage="",clearTimeout(this.timeoutZip),this.timeoutZip=setTimeout(function(){s["o"](t)?n.billingZipErrorMessage="":n.billingZipErrorMessage="Please introduce a valid ZIP code"},5e3)}}},l=r,d=(n("5a10"),n("2877")),u=Object(d["a"])(l,o,i,!1,null,"eb0ca422",null);u.options.__file="DonateBillingMethod.vue";e["default"]=u.exports},acfb:function(t,e,n){"use strict";var o=n("6c29"),i=n.n(o);i.a},b176:function(t,e,n){},c222:function(t,e,n){"use strict";var o=n("9578"),i=n.n(o);i.a},c3e8:function(t,e,n){},cff3:function(t,e,n){"use strict";var o=n("68b5"),i=n.n(o);i.a},de78:function(t,e,n){"use strict";var o=n("1da7"),i=n.n(o);i.a},e3b4:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal",class:{"is-active":t.showingLoginModal},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.validateSubmit()}}},[n("div",{staticClass:"modal-background",on:{click:function(e){t.closeLoginBox()}}}),n("div",{staticClass:"modal-content donate-view donate-view__wrapper inner-close small-modal"},[n("h1",{staticClass:"title-centered"},[t._t("heading",[t.loggedIn?n("span",[t._v("Your account")]):t._e(),t.loggedIn||t.register?t._e():n("span",[t._v("Login")]),!t.loggedIn&&t.register?n("span",[t._v("Register")]):t._e()])],2),t._t("intro",[t.loggedIn?t._e():n("p",{staticClass:"is-centered"},[t._v("Please log in with your email and password:")])]),n("div",{staticClass:"centered"},[t.loggedIn?n("p",[t._v("You are logged in as "+t._s(t.userName))]):t._e(),t.loggedIn?n("UserManagementLinks",{attrs:{layout:"header"},on:{"goto:account":function(e){t.closeLoginBox()}}}):t._e(),t.loggedIn?n("div",{on:{click:function(e){t.logUserOut()}}},[n("a",[t._v("Log Out »")])]):t._e()],1),n("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t.loggedIn?t._e():n("div",[n("form",{on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.validateSubmit()}}},[t.requireName?n("InputName",{attrs:{label:"Email (for the receipt):",required:!0},on:{"input:valid":function(e){t.validateAllFields()},"input:invalid":function(e){t.validateAllFields()},"input:first":function(e){t.form.firstname=e,t.errorMessage=""},"input:last":function(e){t.form.lastname=e,t.errorMessage=""}}}):t._e(),n("InputEmail",{attrs:{label:"Email",required:!0},on:{"input:valid":function(e){t.validateAllFields()},"input:invalid":function(e){t.validateAllFields()},"input:email":function(e){t.setEmail(e)}}}),n("InputPassword",{attrs:{label:"Password",required:!0,duplicate:t.register,"provide-feedback":t.register,"error-message":t.errorMessage},on:{"input:valid":function(e){t.validateAllFields()},"input:invalid":function(e){t.validateAllFields()},"input:password":function(e){t.form.password=e,t.errorMessage=""},"input:passwordConfirmation":function(e){t.form.passwordConfirmation=e,t.errorMessage=""}}})],1),n("div",{staticClass:"columns form-column__wrapper form-column__extra-padded input-line password-input-wrapper"},[n("div",{staticClass:"column is-5 form-column__label-column input-label"}),n("div",{staticClass:"column is-5 form-column__input-column"},[n("ModalForgetPassword",{key:t.forgetPasswordEmail,attrs:{email:t.forgetPasswordEmail}})],1)]),n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"form-submit-wrapper",on:{click:function(e){e.preventDefault(),t.loginOrRegister()}}},[n("button",{staticClass:"button is-large is-danger",attrs:{disabled:t.submitButtonDisabled}},[t._v("Submit")])])]),n("SocialLogin",[n("div",{staticClass:"social-login-wrapper columns is-centered",attrs:{slot:"header"},slot:"header"},[n("p",{staticClass:"is-centered"},[t._v("Or with one of the following services:")])])])],1)]),n("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){e.preventDefault(),t.closeLoginBox()}}})],2)]),"social-signup"===t.layout?n("div",[n("SocialLogin",{attrs:{"show-only":t.showOnly}})],1):t._e(),"app-header"===t.layout?n("div",[t.loggedIn?t._e():n("div",[n("span",{on:{click:function(e){t.openLoginBox()}}},[n("a",[t._v("Login")])]),t._v("\n      |\n      "),n("span",{on:{click:function(e){t.openLoginBox()}}},[n("a",[t._v("Register")])])]),t.loggedIn?n("div",{on:{click:function(e){t.openLoginBox()}}},[t._t("logged",[n("a",[t._v(t._s(t.userName)+" »")])])],2):t._e()]):t._e(),t.layout?t._e():n("div",[t.loggedIn?t._e():n("div",{staticClass:"trigger"},[n("span",{on:{click:function(e){t.openLoginBox()}}},[t._t("trigger")],2)]),t._t("intro")],2)])},i=[],a=n("4706"),s=n("853f"),r=n("ba03"),l=n("a4ab"),d=n("9c9c"),u=n("fa8f"),c=n("2e53"),m={props:["layout","login","signup","showOnly","display","requireName","register"],components:{Icons:a["default"],InputEmail:r["default"],InputName:l["a"],InputPassword:d["default"],ModalForgetPassword:s["a"],SocialLogin:u["a"],UserManagementLinks:function(){return n.e(4).then(n.bind(null,"90de"))}},data:function(){return{showingLoginModal:this.display||!1,errorMessage:"",welcomeMessage:"",submitButtonDisabled:!0,form:{},forgetPasswordEmail:"",timeout:null}},computed:{loggedIn:function(){return this.$store.state.user.loggedIn},userName:function(){return this.$store.state.user.fullname}},methods:{setEmail:function(t){this.form.email=t,this.forgetPasswordEmail=t},openLoginBox:function(){this.showingLoginModal=!0},closeLoginBox:function(){this.showingLoginModal=!1,clearTimeout(this.timeout),this.$emit("modal:close")},logUserOut:function(){this.$store.commit("LOG_OFF",{status:!1}),this.closeLoginBox()},validateSubmit:function(){this.submitButtonDisabled||this.logUserIn()},loginOrRegister:function(){this.register?this.closeLoginBox():this.logUserIn()},validateAllFields:function(){var t=c["f"](this.form.firstname)&&c["f"](this.form.lastname),e=c["g"](this.form.password)&&!this.register||c["g"](this.form.password)&&this.form.password===this.form.passwordConfirmation;e&&c["d"](this.form.email)&&(t&&this.requireName||!this.requireName)?this.submitButtonDisabled=!1:this.submitButtonDisabled=!0},logUserIn:function(){var t=this;if(!this.submitButtonDisabled)return this.submitButtonDisabled=!0,this.$store.dispatch("AUTHENTICATE_USER",{email:this.form.email,password:this.form.password}).then(function(e){e?(t.welcomeMessage="You are logged in, ".concat(t.userName),t.$emit("modal:logged"),t.timeout=setTimeout(function(){t.showingLoginModal=!1},6e3)):(t.validateAllFields(),t.errorMessage="Wrong password or email does not exist")}).catch(function(t){console.log("error: ",t)})}},watch:{display:function(t){t&&(this.showingLoginModal=t)}}},p=m,f=(n("acfb"),n("2877")),h=Object(f["a"])(p,o,i,!1,null,"2cbdc909",null);h.options.__file="LogInModal.vue";e["default"]=h.exports}}]);
//# sourceMappingURL=xthon.umd.min.23.js.map