{"version":3,"sources":["webpack://xthon/./src/components/input/EditableImageField.vue?6df2","webpack://xthon/src/components/input/EditableImageField.vue","webpack://xthon/./src/components/input/EditableImageField.vue?24e8","webpack://xthon/./src/components/input/EditableImageField.vue","webpack://xthon/./src/components/input/EditableImageField.vue?f6fd","webpack://xthon/./src/components/input/EditableImageField.vue?56fa","webpack://xthon/./src/components/input/EditableImageField.vue?3ec7","webpack://xthon/./src/components/input/EditableImageField.vue?83d9"],"names":[],"mappings":";;;;;;;;;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,2BAA2B,6CAA6C,YAAY,8CAA8C,cAAc,OAAO,sCAAsC,0CAA0C,6CAA6C,+BAA+B,kCAAkC,yBAAyB,oBAAoB,yBAAyB,OAAO,gCAAgC,sCAAsC,OAAO,mGAAmG,oDAAoD,0BAA0B,eAAe,OAAO,6GAA6G,KAAK,yBAAyB,gFAAgF,aAAa,EAAE,gBAAgB,8BAA8B,uBAAuB,QAAQ,8CAA8C,iBAAiB,wBAAwB,YAAY,OAAO,iBAAiB,gBAAgB,sDAAsD,sBAAsB,eAAe,oCAAoC,yBAAyB,wBAAwB,kCAAkC,oCAAoC,yBAAyB,kBAAkB,qDAAqD,2BAA2B,gOAAgO,6DAA6D,YAAY,yCAAyC,6BAA6B,KAAK,yBAAyB,oBAAoB,cAAc,iCAAiC,uEAAuE,gBAAgB,yCAAyC,8BAA8B,KAAK,yBAAyB,kBAAkB,cAAc,iCAAiC,sEAAsE,gBAAgB,yCAAyC,8BAA8B,KAAK,yBAAyB,oBAAoB,0BAA0B,+EAA+E,aAAa,EAAE,sBAAsB,cAAc,iCAAiC,6EAA6E,yBAAyB,OAAO,qBAAqB,+BAA+B,gGAAgG,aAAa,qCAAqC;AAC98F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6DA;AAEA;AACA,iDADA;AAEA,MAFA,kBAEA;AACA;AACA,wBADA;AAEA,sBAFA;AAGA;AAHA;AAKA,GARA;AASA;AACA,2BADA;AAEA;AAAA;AAAA;AAFA,GATA;AAaA;AACA,iBADA,2BACA;AACA;AACA;AACA,KAJA;AAKA,eALA,yBAKA;AACA;AACA;AACA,KARA;AASA,aATA,uBASA;AAAA;;AACA,iCACA;AACA;AACA;AACA,SAFA,MAEA;AACA;;AACA;AACA;AACA,OARA,EASA,YATA,EAUA,GAVA,EADA,CAYA;AACA;AAtBA;AAbA,G;;AChE2V,CAAgB,+HAAG,EAAC,C;;;;;;;;;;;ACAlQ;AACvC;AACL;AACc;AACwB;;;AAGvG;AAC6F;AAC7F,gBAAgB,8CAAU;AAC1B,EAAE,gDAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACe,yG;;;;;;;;ACrBf;AAAA;AAAA;AAAumB,CAAgB,6mBAAG,EAAC,C;;;;;;;ACA3nB,uC;;;;;;;;ACAA;AAAA;AAAA;AAA+nB,CAAgB,qoBAAG,EAAC,C;;;;;;;ACAnpB,uC","file":"xthon.umd.42.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"columns is-multiline is-mobile\"},[_c('div',{staticClass:\"column is-4-tablet is-11-mobile\"},[_c('label',{attrs:{\"for\":(\"input-editable_\" + _vm._uid)}},[_vm._v(_vm._s(_vm.label))])]),_c('div',{staticClass:\"column is-5-tablet is-7-mobile\"},[(!_vm.fieldIsOpen)?_c('div',{staticClass:\"edition-trigger\",on:{\"click\":function($event){_vm.openEdition()}}},[(_vm.avatar)?_c('img',{attrs:{\"src\":_vm.avatar,\"width\":\"200\"}}):_vm._e(),(!_vm.avatar)?_c('avatar',{attrs:{\"username\":_vm.$store.state.user.firstname + ' ' + _vm.$store.state.user.lastname,\"rounded\":false}}):_vm._e()],1):_vm._e(),(_vm.fieldIsOpen)?_c('div',{staticClass:\"edition-box\"},[_c('croppa',{attrs:{\"initial-image\":_vm.avatar,\"placeholder\":'Select file',\"placeholder-font-size\":20,\"show-remove-button\":false},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.saveField()},\"new-image\":function($event){_vm.errorMessage = ''}},model:{value:(_vm.myCroppa),callback:function ($$v) {_vm.myCroppa=$$v},expression:\"myCroppa\"}},[_c('div',{attrs:{\"slot\":\"initial\"},slot:\"initial\"},[_vm._v(\"Click here to upload a file\")])]),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-warning\",on:{\"click\":function($event){_vm.myCroppa.remove()}}},[_vm._v(\"Remove\")]),_c('button',{staticClass:\"button is-success\",on:{\"click\":function($event){_vm.saveField()}}},[_vm._v(\"Generate\")])]),(_vm.fieldIsOpen)?_c('div',{staticClass:\"instructions\"},[_c('p',[_vm._v(\"Move the picture around the frame to crop it. You can also scroll or pinch with two fingers to zoom.\")]),_c('p',[_vm._v(\"Click generate once ready to save the image.\")])]):_vm._e()],1):_vm._e()]),_c('div',{staticClass:\"column is-3-tablet is-5-mobile is-pulled-right\"},[_c('div',{staticClass:\"action-icon-wrapper\",class:{'hide-icon': _vm.fieldIsOpen},on:{\"click\":function($event){_vm.openEdition()}}},[_c('Icons',{staticClass:\"action-icon\",attrs:{\"icon\":\"pencil\",\"iconwidth\":\"20px\",\"iconheight\":\"20px\",\"color\":\"#999\"}})],1),_c('div',{staticClass:\"action-icon-wrapper\",class:{'hide-icon': !_vm.fieldIsOpen},on:{\"click\":function($event){_vm.saveField()}}},[_c('Icons',{staticClass:\"action-icon\",attrs:{\"icon\":\"check\",\"iconwidth\":\"20px\",\"iconheight\":\"20px\",\"color\":\"#999\"}})],1),_c('div',{staticClass:\"action-icon-wrapper\",class:{'hide-icon': !_vm.fieldIsOpen},on:{\"click\":function($event){_vm.cancelEdition()},\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"esc\",27,$event.key,\"Escape\")){ return null; }_vm.cancelEdition()}}},[_c('Icons',{staticClass:\"action-icon\",attrs:{\"icon\":\"close-circle\",\"iconwidth\":\"20px\",\"iconheight\":\"20px\",\"color\":\"#999\"}})],1)]),_c('transition',{attrs:{\"name\":\"slide-fade\"}},[(_vm.errorMessage)?_c('div',{staticClass:\"column is-11-mobile is-6-tablet is-offset-4-tablet editable-error-message-wrapper\"},[_c('span',{staticClass:\"editable-error-message\"},[_vm._v(_vm._s(_vm.errorMessage))])]):_vm._e()])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"columns is-multiline is-mobile\">\n      <div class=\"column is-4-tablet is-11-mobile\">\n        <label :for=\"`input-editable_${_uid}`\">{{label}}</label>\n      </div>\n      <div class=\"column is-5-tablet is-7-mobile\">\n        <div class=\"edition-trigger\" v-if=\"!fieldIsOpen\" @click=\"openEdition()\">\n          <img\n            :src=\"avatar\"\n            v-if=\"avatar\"\n            width=\"200\"\n          />\n          <avatar\n            :username=\"$store.state.user.firstname + ' ' + $store.state.user.lastname\"\n            v-if=\"!avatar\"\n            :rounded=\"false\"\n          ></avatar>\n        </div>\n        <div class=\"edition-box\" v-if=\"fieldIsOpen\">\n          <croppa\n            v-model=\"myCroppa\"\n            :initial-image=\"avatar\"\n            :placeholder=\"'Select file'\"\n            :placeholder-font-size=\"20\"\n            :show-remove-button=\"false\"\n            v-on:keyup.enter=\"saveField()\"\n            v-on:new-image=\"errorMessage = ''\"\n          >\n            <div slot=\"initial\">Click here to upload a file</div>\n          </croppa>\n          <div class=\"control\">\n            <button class=\"button is-warning\" @click=\"myCroppa.remove()\">Remove</button>\n            <button class=\"button is-success\" @click=\"saveField()\">Generate</button>\n          </div>\n          <div class=\"instructions\" v-if=\"fieldIsOpen\">\n            <p>Move the picture around the frame to crop it. You can also scroll or pinch with two fingers to zoom.</p>\n            <p>Click generate once ready to save the image.</p>\n          </div>\n        </div>\n      </div>\n      <div class=\"column is-3-tablet is-5-mobile is-pulled-right\">\n        <div class=\"action-icon-wrapper\" @click=\"openEdition()\" :class=\"{'hide-icon': fieldIsOpen}\">\n          <Icons icon=\"pencil\" class=\"action-icon\" iconwidth=\"20px\" iconheight=\"20px\" color=\"#999\"></Icons>\n        </div>\n        <div class=\"action-icon-wrapper\" @click=\"saveField()\" :class=\"{'hide-icon': !fieldIsOpen}\">\n          <Icons icon=\"check\" class=\"action-icon\" iconwidth=\"20px\" iconheight=\"20px\" color=\"#999\"></Icons>\n        </div>\n        <div class=\"action-icon-wrapper\" @click=\"cancelEdition()\" :class=\"{'hide-icon': !fieldIsOpen}\" v-on:keyup.esc=\"cancelEdition()\">\n          <Icons icon=\"close-circle\" class=\"action-icon\" iconwidth=\"20px\" iconheight=\"20px\" color=\"#999\"></Icons>\n        </div>\n      </div>\n      <transition name=\"slide-fade\">\n        <div class=\"column is-11-mobile is-6-tablet is-offset-4-tablet editable-error-message-wrapper\" v-if=\"errorMessage\">\n          <span class=\"editable-error-message\">{{errorMessage}}</span>\n        </div>\n      </transition>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Icons from '@/components/general/Icons.vue';\n\nexport default {\n  props: ['label', 'type', 'avatar', 'errorText'],\n  data() {\n    return {\n      fieldIsOpen: false,\n      errorMessage: '',\n      myCroppa: {},\n    };\n  },\n  components: {\n    Icons,\n    Avatar: () => import('vue-avatar'),\n  },\n  methods: {\n    cancelEdition() {\n      this.fieldIsOpen = false;\n      this.errorMessage = '';\n    },\n    openEdition() {\n      this.fieldIsOpen = true;\n      this.errorMessage = '';\n    },\n    saveField() {\n      this.myCroppa.generateBlob(\n        (blob) => {\n          if (!blob) {\n            this.errorMessage = this.errorText;\n          } else {\n            this.$emit('input:save', blob);\n            this.fieldIsOpen = false;\n          }\n        },\n        'image/jpeg',\n        0.8,\n      ); // 80% compressed jpeg file\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.croppa-container {\n  border: 1px solid $color-light-gray;\n  height: 200px;\n  position: relative;\n  display: inline-block;\n  .icon {\n    position: absolute !important;\n  }\n}\n</style>\n\n<style scoped lang=\"scss\">\n.edition-trigger {\n  &:hover {\n    cursor:pointer;\n  }\n}\n.edition-box {\n  .button {\n    margin: 5px;\n  }\n}\n.action-icon-wrapper {\n  display: inline-block;\n  padding: 0 3px;\n  transition: opacity 0.1s ease-in-out;\n}\n.hide-icon {\n  opacity: 0.4;\n  &:hover {\n    cursor: disabled;\n  }\n}\n.is-pulled-right {\n  text-align: right;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditableImageField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditableImageField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditableImageField.vue?vue&type=template&id=4c8a5663&scoped=true&\"\nimport script from \"./EditableImageField.vue?vue&type=script&lang=js&\"\nexport * from \"./EditableImageField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditableImageField.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./EditableImageField.vue?vue&type=style&index=1&id=4c8a5663&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c8a5663\",\n  null\n  \n)\n\ncomponent.options.__file = \"EditableImageField.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditableImageField.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditableImageField.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditableImageField.vue?vue&type=style&index=1&id=4c8a5663&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditableImageField.vue?vue&type=style&index=1&id=4c8a5663&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}