(("undefined"!==typeof self?self:this)["webpackJsonpxthon"]=("undefined"!==typeof self?self:this)["webpackJsonpxthon"]||[]).push([[54],{"142f":function(e,t,a){"use strict";var n=a("7b2d"),i=a.n(n);i.a},"7b2d":function(e,t,a){},a82f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-management-page__wrapper"},[a("UserDialog",{attrs:{spinner:e.userDialogSpinner,state:e.userDialogModal,"disable-close":e.userDialogSpinner},on:{"modal:close":function(t){e.closeUserDialog()}}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.userDialogHeading))]),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(e._s(e.userDialogMessage))])])]),a("h3",[e._v("Settings")]),a("section",{staticClass:"account-section"},[a("h4",[e._v("Personal Data")]),a("EditableTextField",{ref:"firstname",attrs:{label:"First name:",value:e.userData.firstname,"error-text":"This field can't be empty",type:"name"},on:{"input:save":function(t){e.updateUserField("firstname",t)},"next:field":function(t){e.openEdition("lastname")}}}),a("EditableTextField",{ref:"lastname",attrs:{label:"Last name:",value:e.userData.lastname,"error-text":"This field can't be empty",type:"name"},on:{"input:save":function(t){e.updateUserField("lastname",t)},"next:field":function(t){e.openEdition("email")},"previous:field":function(t){e.openEdition("firstname")}}}),a("EditableTextField",{ref:"email",attrs:{label:"Email:",value:e.userData.email,"error-text":"Email is invalid",type:"email"},on:{"input:save":function(t){e.updateUserField("email",t)},"previous:field":function(t){e.openEdition("lastname")}}}),a("EditableImageField",{attrs:{label:"Avatar:",avatar:e.userData.avatar,"error-text":"Invalid image",type:"avatar"},on:{"input:save":function(t){e.updateAvatar(t)}}}),a("div",{staticClass:"columns is-multiline is-mobile"},[e._m(0),a("div",{staticClass:"column is-5-tablet is-7-mobile"},[a("ModalPasswordChange",{attrs:{state:e.passwordChangeModal},on:{"modal:close":function(t){e.passwordChangeModal=!1}}},[a("div",{attrs:{slot:"trigger"},on:{click:function(t){e.passwordChangeModal=!0}},slot:"trigger"},[a("a",[e._v("Not shown. Change password?")])]),a("div",{attrs:{slot:"heading"},slot:"heading"},[e._v("Password change")])])],1)])],1),a("section",{staticClass:"account-section"},[a("h4",[e._v("Stored Payment Methods")]),e.userData.payment_methods.length?a("div",[a("table",{staticClass:"table is-striped is-fullwidth payment-methods-table"},[e._m(1),a("tbody",e._l(e.userData.payment_methods,function(t){return a("tr",{key:t.id},["card"===t.method?a("td",[a("Icons",{staticClass:"input-icon",attrs:{icon:"credit-card",iconwidth:"20px",iconheight:"20px",color:"#999"}}),e._v(" Credit Card\n            ")],1):e._e(),a("td",[e._v("**** **** **** "+e._s(t.last_four))]),a("td",[e._v(e._s(t.expiration_month)+"/"+e._s(t.expiration_year))]),a("td",[a("a",{staticClass:"delete",on:{click:function(a){e.removePaymentMethod(t.id)}}},[e._v("(Remove)")])])])}))]),a("p",{staticClass:"small"},[e._v("*Note: you can add a new payment method directly on the donation screen.")])]):a("p",[e._v("You don't have any stored payment methods. You can add them while donating.")])])],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-4-tablet is-11-mobile"},[a("label",[e._v("Password")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Payment method")]),a("th",[e._v("Number")]),a("th",[e._v("Expiration")]),a("th",[e._v("Remove")])])])}],s={data:function(){return{userDialogModal:!1,userDialogHeading:"Processing...",userDialogMessage:"",userDialogSpinner:!1,passwordChangeModal:!1}},components:{DonateBillingMethod:function(){return a.e(30).then(a.bind(null,"a6f6"))},UserDialog:function(){return a.e(1).then(a.bind(null,"b7cf"))},Icons:function(){return a.e(58).then(a.bind(null,"4706"))},ModalPasswordChange:function(){return a.e(45).then(a.bind(null,"c401"))},EditableTextField:function(){return a.e(32).then(a.bind(null,"0350"))},EditableImageField:function(){return a.e(38).then(a.bind(null,"1720"))}},computed:{userData:function(){return this.$store.state.user}},methods:{openEdition:function(e){this.$refs[e].openEdition()},removePaymentMethod:function(e){var t=this;return this.userDialogModal=!0,this.userDialogSpinner=!0,this.$store.dispatch("REMOVE_PAYMENT_METHOD",{id:e}).then(function(e){t.userDialogMessage="The payment method was removed.",t.userDialogSpinner=!1}).catch(function(e){t.userDialogMessage="An error occurred. Try again later.",t.userDialogSpinner=!1,console.log(e)})},updateUserField:function(e,t){var a=this;if(this.$store.state.user[e]!==t)return this.userDialogModal=!0,this.userDialogSpinner=!0,this.$store.dispatch("UPDATE_USER_FIELD",{field:e,value:t}).then(function(e){a.userDialogModal=!1}).catch(function(e){a.userDialogMessage="An error occurred. Try again later.",a.userDialogSpinner=!1,console.log(e)})},updateAvatar:function(e){console.log(e)},closeUserDialog:function(){this.userDialogMessage="",this.userDialogModal=!1}}},o=s,r=(a("142f"),a("2877")),l=Object(r["a"])(o,n,i,!1,null,"4339f73b",null);l.options.__file="AccountSettings.vue";t["default"]=l.exports}}]);
//# sourceMappingURL=xthon.umd.min.54.js.map